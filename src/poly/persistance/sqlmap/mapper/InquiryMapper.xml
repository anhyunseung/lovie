<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- JAVA와 연결할 Mapper 파일 설정 -->
<mapper namespace="poly.persistance.mapper.InquiryMapper">

   <!-- 게시판 리스트 쿼리 -->
   <select id="getinquiryList" resultType="InquiryDTO">
      SELECT I.INQ_SEQ, I.TITLE, U.USER_NAME, I.USER_ID,
            I.REG_DT
         FROM INQUIRY_INFO I, USER_INFO U
        WHERE I.USER_ID = U.USER_ID
        ORDER BY I.INQ_SEQ DESC
   </select>
   
   <!-- 게시판 등록 쿼리 -->
   <insert id="InsertinquiryInfo" parameterType="InquiryDTO">
      INSERT INTO INQUIRY_INFO
         (
         TITLE, CONTENTS, USER_ID, 
               REG_USER_NO, REG_DT, Email1, Email2
         )
      VALUES(
         #{title}, #{contents}, #{user_id},  #{reg_user_no}, NOW(), #{email1}, #{email2}
      )
   </insert>
   
   <!-- 게시판 상세보기 쿼리 -->
   <select id="getinquiryInfo" resultType="InquiryDTO">
      SELECT I.INQ_SEQ, I.TITLE, U.USER_NAME, I.USER_ID, I.EMAIL1, I.EMAIL2,
            CONTENTS, I.REG_DT
         FROM INQUIRY_INFO I, USER_INFO U
        WHERE I.USER_ID = U.USER_ID 
          AND I.INQ_SEQ = #{inq_seq}
   </select>

   <!-- 게시판 수정 쿼리 -->
   <update id="updateinquiryInfo" parameterType="InquiryDTO">
      UPDATE INQUIRY_INFO SET
         TITLE = #{title},
         CONTENTS = #{contents},
         CHG_USER_NO = #{chg_user_no},
         EMAIL1 = #{email1},
         EMAIL2 = #{email2},
         CHG_DT = NOW()
      WHERE
         INQ_SEQ = #{inq_seq}   
         
   </update>

   <!-- 게시판 삭제 쿼리 -->
   <delete id="deleteinquiryInfo" parameterType="InquiryDTO">
      DELETE FROM Inquiry_INFO
      WHERE inq_SEQ = #{inq_seq}   
   </delete>
         
</mapper>